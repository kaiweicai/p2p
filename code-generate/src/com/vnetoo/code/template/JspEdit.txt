<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<%@include file="/WEB-INF/jsp/inc/layout.jsp"%>
	<%@include file="/WEB-INF/jsp/inc/meta.jsp"%>
    <meta charset="UTF-8">
    <title>专业的融资服务交易平台－商道界</title>
	<meta name="Keywords" content="${Keywords} " />
	<meta name="Description" content="${Description}" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
</head>
<div class="container">
<form id="tb_input" method="post" action="${webroot}/${baseName.lowerFirst}/save.dhtml">
<div class="input_box">
	<div class="box_title">
		<c:if test="${${baseName.lowerFirst}.id}!=null">修改${tableComment}</c:if>
		<c:if test="${${baseName.lowerFirst}.id}==null">添加${tableComment}</c:if>
	</div>
	<div class="box_content">
		<input type="hidden" name="token" value="${token}" />
		<input type="hidden" name="${${baseName.lowerFirst}.id}" id="${${baseName.lowerFirst}.id}" value="${${baseName.lowerFirst}.id}">
		<table class="tb_input" >
			<tbody>
				${tr_list}
			</tbody>
		</table>
	</div>
	<div class="box_foot">
		<div class="box_foot_buttons">
			<a class="bt_green f_wait" id="input_submit" href="javascript:void(0)" onclick="submit${baseName}()">保 存</a>
			<a class="bt_blue" href="javascript:void(0)" onclick="$.colorbox.close()">取 消</a>	
		</div>
	</div>
</div>
</form>
</div>

<script type="text/javascript">
$(function(){
	$(".f_item").find("input[type='text']").change(function(){
		if($(this).attr("class").indexOf("filedError") > -1){
			$(this).removeClass("filedError");
		}
	});
	$("#tb_input").validate({
		rules:{
${required_list}
		},
		messages:{
${message_list}
		}
	});
});
function submit${baseName}(){
	if (!$("#tb_input").valid()) {
		return false;
	}
	
	$.post($('#tb_input').attr("action"), $('#tb_input').formSerialize(), function(response){
			if(response.result==0){
				$.colorbox.close();
				jAlert('<#if ${${baseName.lowerFirst}.id}??>修改<#else>添加</#if>${tableComment}成功！',function(){pageQuery()});
			}
			else{
				jAlertError('<#if ${${baseName.lowerFirst}.id}??>修改<#else>添加</#if>${tableComment}失败！'+response.msg,function(){$("#tb_input").find("input[id='token']").val(response.token);});
			}
	},"json");
	
}
</script>